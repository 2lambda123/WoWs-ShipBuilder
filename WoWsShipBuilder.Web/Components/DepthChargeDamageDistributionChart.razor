@using WoWsShipBuilder.Web.Services
@using WoWsShipBuilder.Core.DataContainers
@using WoWsShipBuilder.DataStructures
@inject DepthChargeDamageDistributionChartInterop DepthChargeInterop


<MudPaper Outlined="true">
    <canvas id="@("DepthCharges_" + ShipIndex)" height="350" width="350"></canvas>
</MudPaper>

@code {

    [Parameter]
    public string ShipIndex { get; set; } = default!;
    [Parameter]
    public DepthChargeDataContainer? DepthCharge { get; set; }
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);
        if (DepthCharge is not null)
        {
            await DepthChargeInterop.DrawDepthChargeDamageDistributionChart("DepthCharges_" + ShipIndex, new(DepthCharge));
        }
    }
}