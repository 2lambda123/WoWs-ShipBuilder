@using WoWsShipBuilder.ViewModels.Helper
@using WoWsShipBuilder.ViewModels.Other
@code {

    // Parameter needs to be named __builder, otherwise compilation will fail.
    // ReSharper disable once InconsistentNaming UnusedParameter.Local
    public static readonly RenderFragment<(ShipComparisonViewModel.DataSections section, ILocalizer localizer)> ConcealmentDataFragment = element => __builder =>
    {
        bool hide = element.section != ShipComparisonViewModel.DataSections.Concealment;

        <Column Hidden="hide" T="ShipComparisonDataWrapper" Field="ConcealmentFromShipsBase" Title="From ships: Base (km)" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @context.Item.ConcealmentFromShipsBase
            </CellTemplate>
        </Column>
        
        <Column Hidden="hide" T="ShipComparisonDataWrapper" Field="ConcealmentFromShipsOnFire" Title="From ships: On fire (km)" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @context.Item.ConcealmentFromShipsOnFire
            </CellTemplate>
        </Column>
        
        <Column Hidden="hide" T="ShipComparisonDataWrapper" Field="ConcealmentFromShipsSmokeFiring" Title="From ships: Smoke firing (km)" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ConcealmentFromShipsSmokeFiring != 0)
                {
                    <MudText Typo="Typo.body2">
                        @context.Item.ConcealmentFromShipsSmokeFiring
                    </MudText>
                }
                else
                {
                    <MudText Typo="Typo.body2" Color="Color.Primary">
                        @ShipComparisonViewModel.DataNotAvailable
                    </MudText>
                }
            </CellTemplate>
        </Column>
        
        <Column Hidden="hide" T="ShipComparisonDataWrapper" Field="ConcealmentFromPlanesBase" Title="From planes: Base (km)" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @context.Item.ConcealmentFromPlanesBase
            </CellTemplate>
        </Column>
        
        <Column Hidden="hide" T="ShipComparisonDataWrapper" Field="ConcealmentFromPlanesOnFire" Title="From planes: On fire (km)" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @context.Item.ConcealmentFromPlanesOnFire
            </CellTemplate>
        </Column>
        
        <Column Hidden="hide" T="ShipComparisonDataWrapper" Field="ConcealmentFromSubsPeriscopeDepth" Title="From subs: At periscope depth (km)" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @context.Item.ConcealmentFromSubsPeriscopeDepth
            </CellTemplate>
        </Column>
    };
}