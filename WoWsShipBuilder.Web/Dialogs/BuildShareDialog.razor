@using WoWsShipBuilder.Web.Data
@inject ILocalizer Localizer

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.body1">@Localizer.SimpleAppLocalization(nameof(Translation.Build_EnterBuildName))</MudText>
        <MudFocusTrap DefaultFocus="DefaultFocus.FirstChild">
            <MudTextField @bind-Value="BuildName" Label="Build Name" Immediate/>
        </MudFocusTrap>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Cancel">@Localizer.GetAppLocalization(nameof(Translation.Dialog_Cancel)).Localization</MudButton>
        <MudButton OnClick="@OnConfirm" Disabled="@string.IsNullOrWhiteSpace(BuildName)">@Localizer.SimpleAppLocalization(nameof(Translation.Build_CopyUrl))</MudButton>
        @if (!ShortLinkDisabled)
        {
            <MudButton OnClick="@OnConfirmShortLink" Disabled="@string.IsNullOrWhiteSpace(BuildName)">@Localizer.SimpleAppLocalization(nameof(Translation.Build_CopyShortUrl))</MudButton>
        }
    </DialogActions>
</MudDialog>

@code {

    [CascadingParameter]
    MudDialogInstance MudDialog { get; set; } = new();
    
    [Parameter]
    public bool ShortLinkDisabled { get; set; }

    [Parameter]
    public string BuildName { get; set; } = default!;

    private void Cancel()
    {
        MudDialog.Cancel();
    }

    private void OnConfirm()
    {
        MudDialog.Close(new BuildShareResult(BuildName));
    }

    private void OnConfirmShortLink()
    {
        MudDialog.Close(new BuildShareResult(BuildName, true));
    }
}