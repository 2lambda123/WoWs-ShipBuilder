@page "/ship"
@using System.Reactive.Linq
@using Microsoft.AspNetCore.WebUtilities
@using WoWsShipBuilder.Core.DataProvider
@using WoWsShipBuilder.Web.Utility
@inherits ReactiveComponentBase<ShipViewModel>
@inject NavigationManager NavManager
@inject Localizer localizer
<PageTitle>Ship stats</PageTitle>

<MudText Align="Align.Center">Selected ship is: @shipName</MudText>

@code {

    private string shipName = String.Empty;

    protected override void OnInitialized()
    {
        NavManager.TryGetQueryString("shipIndex", out shipName);
        shipName += " - " +localizer[$"{shipName}_FULL"].Localization;
        NavManager.LocationChanged += HandleLocationChanged;
    }

    void HandleLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        NavManager.TryGetQueryString("shipIndex", out shipName);
        StateHasChanged();
    }
}