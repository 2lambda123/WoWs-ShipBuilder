@page "/ship"
@using WoWsShipBuilder.Core.DataProvider
@using WoWsShipBuilder.Web.Utility
@inherits ReactiveComponentBase<ShipViewModel>
@inject NavigationManager navManager
@inject Localizer localizer
<PageTitle>Ship stats</PageTitle>

<MudText Align="Align.Center">Selected ship is: @shipName</MudText>

@code {

    private string shipName = string.Empty;

    protected override void OnInitialized()
    {
        navManager.TryGetQueryString("shipIndex", out shipName);
        shipName += " - " +localizer[$"{shipName}_FULL"].Localization;
        navManager.LocationChanged += HandleLocationChanged;
    }

    void HandleLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        navManager.TryGetQueryString("shipIndex", out shipName);
        StateHasChanged();
    }
}